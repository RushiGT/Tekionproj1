let KOP = 
        {   RestName : "Kitchens of Punjab",
            Speciality : "Punjabi, North Indian",
            Address : "Bilekahalli, BTM - Bangalore",
            Ratings : 4.2 , 
            UsersRat : "100+ Ratings",
            DeliveryTime : '--',
            Exclusive : {
                            Price : 500 ,
                            People : "Cost for two"
                        } ,
            Offers : [
                        {   
                            offer : "60% off up to ₹120",
                            code : "Use code TRYNEW"
                         }, 
                        {
                            offer : "25% off",
                            code : "Use code PARTY"   
                        }
                    ],
            Menu: [
                {
                    sectionId: "recommended",
                    sectionName: "Recommended",
                    sectionContent: [
                        {
                            itemId: "vegPlatter",
                            itemName: "Veg Platter",
                            itemPrice: 120,
                            itemImage: "https://res.cloudinary.com/swiggy/image/upload/fl_lossy,f_auto,q_auto,w_208,h_208,c_fit/svwiyc9assj6qorpdji0",
                            itemInfo: "An authentic veg platter with 3 pieces of Paneer Achari, 3 pieces of Hara Bhara, 3 pieces of Veg Seekh and 3 pieces of Malai Chaap.",
                            itemType: "Veg"

                        },
                        {
                            itemId: "vegPlatter2",
                            itemName: "Veg Platter2",
                            itemPrice: 130,
                            itemImage: "https://res.cloudinary.com/swiggy/image/upload/fl_lossy,f_auto,q_auto,w_208,h_208,c_fit/svwiyc9assj6qorpdji0",
                            itemInfo: "An authentic veg platter with 3 pieces of Paneer Achari, 3 pieces of Hara Bhara, 3 pieces of Veg Seekh and 3 pieces of Malai Chaap.",
                            itemType: " Non Veg"

                        },
                        {
                            itemId: "vegPlatter11",
                            itemName: "Veg Platter11",
                            itemPrice: 134,
                            itemImage: "https://res.cloudinary.com/swiggy/image/upload/fl_lossy,f_auto,q_auto,w_208,h_208,c_fit/svwiyc9assj6qorpdji0",
                            itemInfo: "An authentic veg platter with 3 pieces of Paneer Achari, 3 pieces of Hara Bhara, 3 pieces of Veg Seekh and 3 pieces of Malai Chaap.",
                            itemType: " Non Veg"

                        },
                        {
                            itemId: "vegPlatter3",
                            itemName: "Veg Platter3",
                            itemPrice: 140,
                            itemImage: "https://res.cloudinary.com/swiggy/image/upload/fl_lossy,f_auto,q_auto,w_208,h_208,c_fit/svwiyc9assj6qorpdji0",
                            itemInfo: "An authentic veg platter with 3 pieces of Paneer Achari, 3 pieces of Hara Bhara, 3 pieces of Veg Seekh and 3 pieces of Malai Chaap.",
                            itemType: "Veg"

                        },
                        {
                            itemId: "vegPlatter12",
                            itemName: "Veg Platter12",
                            itemPrice: 139,
                            itemImage: "https://res.cloudinary.com/swiggy/image/upload/fl_lossy,f_auto,q_auto,w_208,h_208,c_fit/svwiyc9assj6qorpdji0",
                            itemInfo: "An authentic veg platter with 3 pieces of Paneer Achari, 3 pieces of Hara Bhara, 3 pieces of Veg Seekh and 3 pieces of Malai Chaap.",
                            itemType: " Non Veg"

                        },

                    ]
                },

                {
                    sectionId: "platters",
                    sectionName: "Platters",
                    sectionContent: [
                        {
                            itemId: "vegPlatter4",
                            itemName: "Veg Platter4",
                            itemPrice: 120,
                            itemImage: "https://res.cloudinary.com/swiggy/image/upload/fl_lossy,f_auto,q_auto,w_208,h_208,c_fit/svwiyc9assj6qorpdji0",
                            itemInfo: "An authentic veg platter with 3 pieces of Paneer Achari, 3 pieces of Hara Bhara, 3 pieces of Veg Seekh and 3 pieces of Malai Chaap.",
                            itemType: "Veg"

                        },
                        {
                            itemId: "vegPlatter5",
                            itemName: "Veg Platter5",
                            itemPrice: 130,
                            itemImage: "https://res.cloudinary.com/swiggy/image/upload/fl_lossy,f_auto,q_auto,w_208,h_208,c_fit/svwiyc9assj6qorpdji0",
                            itemInfo: "An authentic veg platter with 3 pieces of Paneer Achari, 3 pieces of Hara Bhara, 3 pieces of Veg Seekh and 3 pieces of Malai Chaap.",
                            itemType: " Non Veg"

                        },
                        {
                            itemId: "vegPlatter6",
                            itemName: "Veg Platter6",
                            itemPrice: 140,
                            itemImage: "https://res.cloudinary.com/swiggy/image/upload/fl_lossy,f_auto,q_auto,w_208,h_208,c_fit/svwiyc9assj6qorpdji0",
                            itemInfo: "An authentic veg platter with 3 pieces of Paneer Achari, 3 pieces of Hara Bhara, 3 pieces of Veg Seekh and 3 pieces of Malai Chaap.",
                            itemType: "Veg"

                        }

                    ]
                },
                {
                    sectionId: "familyPack",
                    sectionName: "Family Pack",
                    sectionContent: [
                        {
                            itemId: "vegPlatter7",
                            itemName: "Veg Platter7",
                            itemPrice: 120,
                            itemImage: "https://res.cloudinary.com/swiggy/image/upload/fl_lossy,f_auto,q_auto,w_208,h_208,c_fit/svwiyc9assj6qorpdji0",
                            itemInfo: "An authentic veg platter with 3 pieces of Paneer Achari, 3 pieces of Hara Bhara, 3 pieces of Veg Seekh and 3 pieces of Malai Chaap.",
                            itemType: "Veg"

                        },
                        {
                            itemId: "vegPlatter8",
                            itemName: "Veg Platter8",
                            itemPrice: 130,
                            itemImage: "https://res.cloudinary.com/swiggy/image/upload/fl_lossy,f_auto,q_auto,w_208,h_208,c_fit/svwiyc9assj6qorpdji0",
                            itemInfo: "An authentic veg platter with 3 pieces of Paneer Achari, 3 pieces of Hara Bhara, 3 pieces of Veg Seekh and 3 pieces of Malai Chaap.",
                            itemType: " Non Veg"

                        },
                        {
                            itemId: "vegPlatter9",
                            itemName: "Veg Platter9",
                            itemPrice: 140,
                            itemImage: "https://res.cloudinary.com/swiggy/image/upload/fl_lossy,f_auto,q_auto,w_208,h_208,c_fit/svwiyc9assj6qorpdji0",
                            itemInfo: "An authentic veg platter with 3 pieces of Paneer Achari, 3 pieces of Hara Bhara, 3 pieces of Veg Seekh and 3 pieces of Malai Chaap.",
                            itemType: "Veg"

                        },
                        {
                            itemId: "vegPlatter10",
                            itemName: "Veg Platter10",
                            itemPrice: 140,
                            itemImage: "https://res.cloudinary.com/swiggy/image/upload/fl_lossy,f_auto,q_auto,w_208,h_208,c_fit/svwiyc9assj6qorpdji0",
                            itemInfo: "An authentic veg platter with 3 pieces of Paneer Achari, 3 pieces of Hara Bhara, 3 pieces of Veg Seekh and 3 pieces of Malai Chaap.",
                            itemType: "Veg"

                        }


                    ]
                }
            ]
        };
function createHtmlheader(KOP)
{
   let Board = document.getElementsByClassName('board')[0];
   let restau = document.createElement('div');
   restau = updateHtmlElement(restau,'restau','','','',KOP.RestName);
   let speciality = document.createElement('div');
   speciality = updateHtmlElement(speciality, 'speciality','','','',KOP.Speciality);
   let address = document.createElement('div');
   address = updateHtmlElement(address,'address','','','',KOP.Address);
   Board = appendChild2(Board,[restau,speciality,address]);
   let ratings1 = document.getElementsByClassName('rat1')[0];
   let rat1 = document.createElement('span');
   let rat2 = document.createElement('span');
   rat2.className = "icon-star";
   ratings1.appendChild(rat2);
   rat1.textContent = KOP.Ratings;
   ratings1.appendChild(rat1);
   let ratings2 = document.getElementsByClassName('rat2')[0];
    let rat3 = document.createElement('span');
    rat3.textContent = KOP.UsersRat;
    ratings2.appendChild(rat3);

    
    ratings1 = document.getElementsByClassName('rat1')[1];
     rat1 = document.createElement('span');
    rat1.textContent = KOP.DeliveryTime + " mins";
    ratings1.appendChild(rat1);

    ratings1 = document.getElementsByClassName('rat1')[2];
    rat1 = document.createElement('span');
   rat1.textContent = "₹ "+ KOP.Exclusive.Price ;
   ratings1.appendChild(rat1);

   ratings2 = document.getElementsByClassName('rat2')[2];
   rat1 = document.createElement('span');
   rat1.textContent = KOP.Exclusive.People ;
   ratings2.appendChild(rat1);
   
   


};

function createHtmlSections(menu) {

    let htmlSectionList = document.getElementById('varieties');
    for (let section of menu) {
        let sectionElement0 = document.createElement('li');
        let sectionElement = document.createElement('a');
        sectionElement = updateHtmlElement(sectionElement, "ListSection", section.sectionId, "#"+section.sectionId+ "cursor", '', section.sectionName);
        if(menu[0]===section)
        {
             sectionElement0.className= "activate";
        }
        sectionElement0.id =section.sectionId+ "cursor1";
        sectionElement0.appendChild(sectionElement);
        htmlSectionList.appendChild(sectionElement0);
        createHtmlItemMenu(section);

    }
};

function createHtmlItemMenu(section) {
    let itemList = document.createElement('div'); // Section wise ItemList  
    itemList = updateHtmlElement(itemList, 'menufull', section.sectionId + "cursor");
    let sectionNAME = document.createElement('div');
    sectionNAME = updateHtmlElement(sectionNAME, 'sectionfull', section.sectionId + "Menu", '', '', section.sectionName);
    let sectionSize = document.createElement('div');
    sectionSize = updateHtmlElement(sectionSize, 'sizefull', section.sectionId + "Size", '', '', section.sectionContent.length + " items");
    itemList = appendChild2(itemList, [sectionNAME, sectionSize]);
    for (let item of section.sectionContent) {
        let Item = document.createElement('div');
        Item = updateHtmlElement(Item, 'itemFull', item.itemId);
        let itemMenu = document.createElement('div');
        let itemimage = document.createElement('div');
        itemMenu = updateHtmlElement(itemMenu, '', item.itemId + "menu");
        itemimage = updateHtmlElement(itemimage, '', item.itemId + "image");
        let itemtype = document.createElement('div');
        itemtype = updateHtmlElement(itemtype, item.itemType, '', '', '', item.itemType);
        let itemname = document.createElement('div');
        itemname = updateHtmlElement(itemname, 'itemvalue', '', '', '', item.itemName);
        let iteminfo = document.createElement('div');
        iteminfo = updateHtmlElement(iteminfo, 'iteminfo', '', '', '', item.itemInfo);
        let image = document.createElement('img');
        image = updateHtmlElement(image, 'itemimage', '', '', item.itemImage);
        let addbtn = document.createElement('button');
        addbtn= updateHtmlElement(addbtn,'addbutton','','','',"ADD");
        let price = document.createElement('div');
        price = updateHtmlElement(price, 'itemprice', '', '', '', item.itemPrice);
        itemMenu = appendChild2(itemMenu, [itemtype, itemname, price, iteminfo]);
        itemimage=appendChild2(itemimage,[image,addbtn]);
        Item = appendChild2(Item, [itemMenu, itemimage]);
        itemList.appendChild(Item);
    }
    let itemhtmllist = document.getElementById('menuim');
    itemhtmllist.appendChild(itemList);

};

/////
function updateHtmlElement(Element, Class, ID, Href, Src, TextContent) {
    if (Class !== '') {
        Element.className = Class;
    }
    if (ID !== '') {
        Element.id = ID;
    }
    if (Href !== '') {
        Element.href = Href;
    }
    if (Src !== '') {
        Element.src = Src;
    }
    if (TextContent !== '') {
        Element.textContent = TextContent;
    }
    return Element;
};

///////
let appendChild2 = function (parent, children) {
    for (let child of children) {
        parent.appendChild(child);
    }
    return parent;
};

/*function sectionScroll()
{
    const link = document.querySelectorAll('.ListSection');
   
    link.forEach((item)=>{
       
        item.addEventListener("click", ()=> 
        {
                let element = document.getElementById(item.getAttribute('id') + "cursor");
                element.scrollIntoView({
                    behavior : "smooth",
                });
        }
        )

    });
} 
*/
function highlighter()
{

const menus = document.querySelectorAll(".menufull");
window.addEventListener("scroll", () => {
   menus.forEach((menu)=>{
       let position = menu.getBoundingClientRect();
       
       let section = document.getElementById(menu.id + '1');
       //console.log(section);
    
       if(position.top<=400 && position.top>=400-position.height) {
		section.classList.add('activate');
	    }
        else 
        {
           section.classList.remove('activate');
        }
   })
});
} 
function getPropertiesOfItem (btn)
{
   let itemElmnt = btn.parentElement.parentElement;
    let itemInfoElmnt = itemElmnt.firstChild;
    let itemPropertiesHtml = itemInfoElmnt.childNodes;
    let properties = {};
    properties.type = itemPropertiesHtml[0].innerHTML;
    properties.itemName = itemPropertiesHtml[1].innerHTML;
    properties.itemPrice = +itemPropertiesHtml[2].innerHTML;
    properties.itemQuantity = 1;
    return properties;

}
function updateAddbtn(btn)
{
   let parent = btn.parentElement;
    btn.remove();
   let minus = document.createElement('button');
   let quantity = document.createElement('button');
   let plus = document.createElement('button');
   minus = updateHtmlElement(minus,"quantButton minus",'','','','-');
   quantity = updateHtmlElement(quantity,"quantButton quantity",'','','','1'); 
   plus = updateHtmlElement(plus,"quantButton plus",'','','','+');
   parent = appendChild2(parent , [minus,quantity,plus]);
}
function updateCart(btn,properties)
{
    let filler0 = document.getElementById('filler0');
    if(filler0.style.display !== 'none')
    {
        filler0.style.display = 'none';
    }
    let filler = document.getElementsByClassName('filler')[0];
    let cartitem = document.createElement('div');
    cartitem.className = "cartitem";
    cartitem.id = properties.itemName + 'cart';
    let cartItemName = document.createElement('span');
    cartItemName.textContent = properties.itemName;
    let cartItemtype = document.createElement('span');
    cartItemtype.textContent = properties.type;
    let cartItemPrice = document.createElement('span');
    cartItemPrice.textContent = properties.itemPrice;


    cartitem = appendChild2(cartitem,[cartItemtype,cartItemName,cartItemPrice]);
   console.log(filler);
    filler.appendChild(cartitem);


}
Cart = {}; 
function addButtonImplementation(menu)
{
    let addbtns = document.querySelectorAll('.addbutton');
    addbtns.forEach((btn)=>{
        btn.addEventListener('click',()=>{
           let properties= getPropertiesOfItem(btn);
            let itemCartname = properties.itemName;
            Cart[itemCartname] = properties ; 
            updateAddbtn(btn);
            updateCart(btn,properties);

        })

    });
}

/////
createHtmlheader(KOP);
createHtmlSections(KOP.Menu);
highlighter();
addButtonImplementation(KOP.Menu);
//sectionScroll();

